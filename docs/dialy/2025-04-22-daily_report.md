
# 📖 『18QUAD 開発日誌：第二章　ファイル分割とランキングの夜明け』

## 🌄 再構築の朝、「main.dartが重すぎる」

2025年4月22日。  
長くなりすぎた `main.dart` を見た開発者は、ある決断を下した。

>「main.dartが肥大化している。機能ごとに分けよう」

この日から、18QUADのコードは `screens/`, `services/`, `models/`, `widgets/` といったディレクトリに整理されていく。  
**それは、プロジェクトに“秩序”がもたらされた瞬間だった。**

---

## 📁 ディレクトリを作れ、秩序のもとに

- `screens/` に画面ファイルを移す
- `services/` にFirebase操作系を分離
- `models/` には `AppUser` モデル
- `widgets/` には `AppScaffold` が収まることに

>「auth/ ディレクトリは……いらんな」

その一言で、構成はよりシンプルかつ強靭なものへ。

---

## 🧠 Providerの導入、「AuthServiceをグローバルに」

状態管理の第一歩として `provider` が導入された。  
これにより、`AuthService` がどこでも呼び出せるようになり、  
**ログイン処理とホーム画面が完全に分離・ルーティング可能**になった。

>「main.dartからロジックを追いやるんだ」

そう言って、コードはさらに整理されていった。

---

## 📊 ランキング画面、そして…

Firestoreからスコアを読み込み、ランキングとして表示する。  
最初は UID だけしか表示できなかった。  
だが開発者は満足しなかった。

>「UIDじゃない、名前が欲しい。順位も欲しい。管理者だけに表示させたい」

- UID → 表示名取得へ
- 順位表示の実装
- Firestoreルール：管理者以外は読み取り禁止案も浮上

**ランキングの夜明け**は、この日始まった。

---

## 🎁 GitHubへの初Push計画

Gitでの管理が始まり、`main` ブランチに向けた push の準備が整った。  
だがこの日、エラーが出た。

>「error: src refspec main does not match any」

Gitと人間の間にはまだ越えねばならぬ壁があった。

---

## 🧾 今日の要件

- [x] コード構成のディレクトリ分離（4構成＋不要ディレクトリ除去）
- [x] Providerによる `AuthService` の注入
- [x] ランキング機能（表示名・順位・管理者ビューの構想）
- [x] Git 初Push計画スタート

---

## 📘 エピローグ

整理整頓されたコードは、まるで掃除された部屋のように気持ちが良い。  
そしてランキング機能は、ただのスコア表示ではなく  
**「誰が」「どれだけやったか」を讃えるステージ**となった。

この日は“整える日”。  
明日の“個性を出す日”に備える、大事な準備運動だった。
