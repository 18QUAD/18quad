# 📘 18QUAD 開発日報 - 2025年5月4日（第14日）

## 🎯 本日のテーマ：「表示の迷宮、グレーアウトの罠」

18QUADの戦士はログイン状態の曖昧な影に悩まされていた。  
「なぜ管理者なのにユーザ管理が使えないんだ！」という悲鳴が、画面の向こうから聞こえる。  
勇者は `UserProvider` を手にとり、`isAdmin` の本質に迫る――。

---

## ✅ 主な進捗

- `UserProvider`: `isAdmin` を Firestore ではなく **Authentication UIDベースで管理**する構成に再統一。
- `AppDrawer` および `AppScaffold`：ログイン状態に応じてメニューをグレーアウト制御する仕組みの整理。
- Firestoreの `counts` 非表示方針に基づき、**ユーザ一覧の表示項目を `uid` ベースに変更**。
- 登録順（`createdAt` 昇順）でユーザを並べることで、**管理の透明性を強化**。

---

## 🧨 今日の戦い

- 🌀 Git Push Protectionにより `serviceAccountKey.json` が封じられる → **歴史改変（filter-repo）で削除**
- 🌀 `admin_counts_screen.dart` の行数カウントが謎に狂う → **物理的行数による正確な開発ルール確立**
- 🌀 表示が一見正常でも、実は **再描画が発生していない**問題に気づく

---

## ✨ 五所川原のことば

> 「見えているようで見えていない。消したつもりで消えていない。開発とは、幻影との戦いだな」

---

## 🧩 総括

**ルールの強化と内部仕様の統一**が進んだ一日だった。  
各画面における `isAdmin` や `status` の管理方式を明文化し、**迷宮化していたUI表示条件の地図を取り戻した**。  
行数カウントの厳密化と、事前予告のない修正禁止ルールも、この日に確立された。
