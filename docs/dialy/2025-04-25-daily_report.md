# 📖 『18QUAD 開発日誌：第八章　クラウドに五所川原が現れた日』

## 🌪 混乱の幕開け

「共通UIが……出てない……？」

その朝、18QUADの世界には異変が起きていた。  
ランキング画面からナビゲーションが消え、タイトル画面には警告マーク。  
なぜか、UIが“昨日の状態”に戻っていた。

開発者は眉をひそめ、つぶやいた。

>「これは……Gitの過去へ戻るしかないな」

---

## 🔁 ロールバック大作戦

かくして始まった、**「ロールバック後6回目」**の戦い。  
1ファイルずつ、Gitから取り戻す。

- `home_screen.dart`
- `ranking_screen.dart`
- `title_screen.dart`
- `main.dart`

再構築されたアプリは、**ようやく昨日の光を取り戻した。**

---

## 🧪 新たな挑戦：ユーザーを“神の手”で生み出す

次なる任務はこうだ。

>「管理画面から、新規ユーザーをCloud Functionsで作れるようにしよう」

開発者はFirebaseと向き合い、関数 `createUser` を作った。  
だが、**ESLintという名の地雷原**が立ちはだかる。

- `max-len`
- `object-curly-spacing`
- `Unexpected token`

…数々の構文チェックがデプロイを阻む。

---

## 🔧 対抗策：Lintを封印せよ

開発者は決断する。

>「もうlintは黙っててくれ。俺たちは今、急いでるんだ」

- `package.json` から lint を無効化  
- `firebase.json` から predeploy を削除

こうして、**Cloud Functionsはようやく空へ放たれた。**

---

## 🌐 そして現れる五所川原

五所川原――  
その名を持つ新規ユーザーが、Cloud Functionsによって誕生した。

Firebase Auth には存在していた。  
しかし、**ランキングには現れない。**

開発者は目を細める。

>「これは……counts に登録されていない…？」

その通り。関数に**Firestoreへの登録処理がなかった**のだ。

---

## 🔁 最後の追記

```js
await admin.firestore().collection("counts").doc(userRecord.uid).set({
  displayName,
  email,
  count: 0,
});
```

その一文で、五所川原は世界に“正式に”生まれた。

---

## 🎨 UIの仕上げ：色が見えない！

ふと気づけば、追加ダイアログの入力欄が白い背景に白い文字。  
開発者は、静かにキーボードを打つ。

```dart
style: TextStyle(color: Colors.black)
```

その行が加わったことで、**アプリはまたひとつ人にやさしくなった。**

---

## 🧾 本日の戦績

- [x] 全画面のUIロールバックと復元完了
- [x] `user_add_dialog.dart` 修正（URL追加、文字色修正）
- [x] Cloud Functions `createUser` デプロイ成功
- [x] Firestore counts 連携追加 → 五所川原の登録確認
- [x] `requirements.md` 最新状況に基づき完全統合
- [x] Gitに「ロールバック後8回目」として記録

---

## 📘 エピローグ

五所川原は今日、ついにこの世界に存在した。  
クラウドの片隅で、ランキングという光のステージに立った。

それはただのデータの1行じゃない。  
**開発者が自らの手で作り、連れてきた存在**だった。

>「明日はセキュリティルールを整えて、世界を守る日だな」

18QUAD、次回――**管理者、制御権を得る**🔥