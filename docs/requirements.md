# ✅ 実現済み要件チェックリスト（18QUAD）

---

## 🏁 コア機能

- [x] Flutter Web対応（Chrome）
- [x] Firebase Authでログイン・登録・パスワード変更
- [x] Firestoreにユーザごとの打鍵カウントを記録
- [x] カウントの加算・前回カウントからの継続
- [x] アプリ起動時にログイン状態を維持し、自動的にホームに遷移

---

## 🔐 ユーザー管理

- [x] Firebase Auth によるメールアドレス＋パスワード認証
- [x] 新規登録／ログイン／ログアウト機能
- [x] 表示名の登録と変更
- [x] ログイン状態の保持と状態チェック（セッション維持）
- [x] Firestoreの `users` ドキュメントに `groupId`, `groupJoinStatus`, `groupRequestId` を追加管理

---

## 🖼 アイコン設定（アバター）

- [x] デフォルトアイコン表示（未ログイン時）
- [x] 任意画像をアップロードしてアイコンに設定
- [x] アップロードされた画像は Firebase Storage に保存
- [x] Firestore に `iconUrl` を保持して表示

---

## 📊 ランキング機能

- [x] Firestoreの counts コレクションから集計
- [x] 自分のスコアをハイライト（ログイン中ユーザの強調表示）
- [x] UIDではなく表示名とアイコンで表示
- [x] ランキング順位表示（1位〜）
- [x] 表示名が未設定の場合 `(名前未設定)` 表記
- [x] グループごとのランキング表示対応（グループ総合スコア順）

---

## 🛠 管理者モード

- [x] 管理者ユーザでログインしたときのみメニューに「ユーザ管理」を表示
- [x] ユーザ管理画面で、すべてのユーザ情報を一覧表示
- [x] 各ユーザの情報（表示名・パスワード・アイコンなど）を編集できる
- [ ] ユーザの削除、およびカウントのリセット操作が可能（予定）
- [x] Firestoreの `users` + `counts` コレクションと連動管理

---

## 🆕 グループ機能拡張（2025-04-27追加）

- [x] グループ作成画面の実装（招待コード自動発行）
- [x] グループリクエスト画面の骨組み作成（招待コード入力＆仮送信）
- [x] ハンバーガーメニュー制御（ログイン/所属状態に応じた表示）
- [x] グループ未所属時のみ「グループ作成」「グループリクエスト」が有効化
- [x] グループ所属済み時のみ「グループ管理」が有効化
- [ ] グループ参加リクエスト送信機能（実装予定）

---

## 🔄 今後の改善・調整中機能

- [ ] Firebase Functionsで作成したユーザの `counts` 登録検証
- [ ] Firestore Security Rules強化（管理者以外読み取り制限）
- [ ] グループ関連機能のエラーハンドリング（例：無効なコード、二重申請防止）
- [ ] ゲストモード（ログイン不要モード）の導入検討