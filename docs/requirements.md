# ✅ 実現済み要件チェックリスト（18QUAD）

---

## 🏁 コア機能

- [x] Flutter Web対応（Chrome）
- [x] Firebase Authでログイン・登録・パスワード変更
- [x] Firestoreにユーザごとの打鍵カウントを記録
- [x] カウントの加算・前回カウントからの継続
- [x] アプリ起動時にログイン状態を維持し、自動的にホームに遷移

---

## 🔐 ユーザー管理

- [x] Firebase Auth によるメールアドレス＋パスワード認証
- [x] 新規登録／ログイン／ログアウト機能
- [x] 表示名の登録と変更
- [x] ログイン状態の保持と状態チェック（セッション維持）

---

## 🖼 アイコン設定（アバター）

- [x] デフォルトアイコン表示（未ログイン時）
- [x] アイコンID選択（旧仕様）
- [x] 任意画像をアップロードしてアイコンに設定（現仕様）
- [x] アップロードされた画像は Firebase Storage に保存
- [x] Firestore に `iconUrl` を保持して表示

---

## 📊 ランキング機能

- [x] Firestoreの counts コレクションから集計
- [x] 自分のスコアをハイライト（ログイン中ユーザの強調表示）
- [x] UIDではなく表示名とアイコンで表示
- [x] ランキング順位表示（1位〜）
- [x] 表示名が未設定の場合 `(名前未設定)` 表記

---

## 🧪 テストモード／デモ環境（任意）

- [ ] ログイン不要のゲストモード（現在非対応）

---

## 🔐 セキュリティ＆整合性（開発段階）

- [x] Firestore 構造：users / counts のドキュメント構造整備
- [ ] Firestore ルールの強化（管理者のみ全読み取り etc.）※未完
- [x] Firebase Functions 導入（ユーザ追加に使用）

---

## 🛠 管理者モード（2025-04-24追加）

- [x] 管理者ユーザでログインしたときのみメニューに「ユーザ管理」を表示
- [x] ユーザ管理画面で、すべてのユーザ情報を一覧表示
- [x] 各ユーザの情報（表示名・パスワード・アイコンなど）を編集できる
- [ ] ユーザの削除、およびカウントのリセット操作が可能
- [x] Firestoreの `users` コレクション + `counts` コレクションと連動

---

## 🔄 今後の改善・調整中機能

- [ ] Firebase Functionsで作成したユーザの `counts` 登録が確実に行われるか検証中
- [ ] ユーザ登録時のエラーハンドリングとバリデーション強化
- [ ] Firestore Security Rulesの実装

## 🆕 グループ機能拡張 (2025-04-27)

## 🔐 ユーザー管理
- [x] ユーザ情報に `groupId`, `groupJoinStatus`, `groupRequestId` を追加
- [x] グループ未所属/申請中/正式所属をステータス管理

## 📊 ランキング機能
- [x] グループごとのランキング表示（グループ総合スコア順）
- [x] 個人ランキングとグループランキングを切り替え可能にするUI設計

## 🛠 管理者モード
- [x] グループ作成画面の実装（招待コード発行）
- [x] グループ参加リクエスト一覧画面の実装
- [x] グループ主による承認・拒否機能実装

## 🔄 今後の改善・調整中機能
- [x] グループ関連機能のエラーハンドリング強化（例：二重申請防止、無効な招待コード対策）
