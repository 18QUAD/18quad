# Firestore ãƒ‡ãƒ¼ã‚¿æ§‹é€ å®šç¾©ï¼ˆ18QUAD 2025-04-30æ™‚ç‚¹ï¼‰

---

## ğŸ”¹ usersï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼‰

**ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³åï¼š** `users`

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å   | å‹       | èª¬æ˜                                      |
|----------------|----------|-------------------------------------------|
| uid            | string   | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®UIDï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆIDã¨ä¸€è‡´ï¼‰      |
| displayName    | string   | è¡¨ç¤ºå                                    |
| email          | string   | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆèªè¨¼ã«ä½¿ç”¨ï¼‰              |
| iconUrl        | string   | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã®URLï¼ˆç©ºãªã‚‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰  |
| groupId        | string   | æ‰€å±ã‚°ãƒ«ãƒ¼ãƒ—IDï¼ˆæœªæ‰€å±ãªã‚‰ç©ºï¼‰             |
| status         | string   | çŠ¶æ…‹ï¼ˆnone, member, managerï¼‰             |
| createdAt      | timestamp| ç™»éŒ²æ—¥æ™‚                                  |

---

### ğŸ”¸ ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼šusers/{uid}/counts

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID | èª¬æ˜       |
|----------------|------------|
| {uid}          | è‡ªåˆ†è‡ªèº«ã®ã‚«ã‚¦ãƒ³ãƒˆ |

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | å‹     | èª¬æ˜         |
|--------------|--------|--------------|
| count        | number | é€£æ‰“ã‚«ã‚¦ãƒ³ãƒˆ |

---

### ğŸ”¸ ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼šusers/{uid}/group_requests

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å   | å‹       | èª¬æ˜                                   |
|----------------|----------|----------------------------------------|
| requesterId    | string   | ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼UID         |
| groupId        | string   | ç”³è«‹å¯¾è±¡ã®ã‚°ãƒ«ãƒ¼ãƒ—ID                   |
| inviteCode     | string   | å…¥åŠ›ã—ãŸæ‹›å¾…ã‚³ãƒ¼ãƒ‰                     |
| message        | string   | ç”³è«‹æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆä»»æ„ï¼‰             |
| status         | string   | çŠ¶æ…‹ï¼ˆpending, approved, rejectedï¼‰    |
| createdAt      | timestamp| ä½œæˆæ—¥æ™‚                               |

---

## ğŸ”¹ groupsï¼ˆã‚°ãƒ«ãƒ¼ãƒ—æƒ…å ±ï¼‰

**ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³åï¼š** `groups`

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å   | å‹       | èª¬æ˜                                  |
|----------------|----------|---------------------------------------|
| name           | string   | ã‚°ãƒ«ãƒ¼ãƒ—å                            |
| description    | string   | ã‚°ãƒ«ãƒ¼ãƒ—ç´¹ä»‹æ–‡ï¼ˆä»»æ„ï¼‰                |
| iconUrl        | string   | ã‚°ãƒ«ãƒ¼ãƒ—ç”»åƒURL                       |
| inviteCode     | string   | æ‹›å¾…ã‚³ãƒ¼ãƒ‰                            |
| createdBy      | string   | ä½œæˆè€…UID                             |
| ownerUid       | string   | ã‚°ãƒ«ãƒ¼ãƒ—é•·UIDï¼ˆæ‰¿èªè€…ï¼‰               |
| createdAt      | timestamp| ä½œæˆæ—¥æ™‚                              |

---

## ğŸ”¹ notificationsï¼ˆé€šçŸ¥ï¼‰

**ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³åï¼š** `notifications`

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | å‹       | èª¬æ˜                                     |
|--------------|----------|------------------------------------------|
| toUid        | string   | é€šçŸ¥å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼UID                      |
| message      | string   | é€šçŸ¥æœ¬æ–‡                                 |
| timestamp    | timestamp| é€šçŸ¥ä½œæˆæ—¥æ™‚                             |
| isRead       | boolean  | æ—¢èª­ãƒ•ãƒ©ã‚°ï¼ˆfalse = æœªèª­, true = æ—¢èª­ï¼‰   |

---

## ğŸ”¹ ãã®ä»–ï¼šã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«æƒ³å®š

- `users/{uid}`ï¼š`request.auth.uid == uid`
- `users/{uid}/group_requests`ï¼š`request.auth.uid == uid`
- `groups`ï¼šèª­ã¿å–ã‚Šã¯å…¨ä½“å…¬é–‹ã€æ›¸ãè¾¼ã¿ã¯ `createdBy == request.auth.uid`
- `notifications`ï¼š`toUid == request.auth.uid`

---

## ğŸ”š å‚™è€ƒ

- `counts` ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³åŒ–ï¼ˆ2025-04æ›´æ–°ï¼‰
- `group_requests` ã‚‚ã‚µãƒ–ã‚³ãƒ¬åŒ–ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å˜ä½ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚’å¼·åŒ–
- é€šçŸ¥ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ã¨æ—¢èª­ç®¡ç†ã‚’è€ƒæ…®ã—ã¦åˆ†é›¢è¨­è¨ˆ

---
